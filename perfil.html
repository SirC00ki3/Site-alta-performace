<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Perfil - Concha</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="dark-theme.css" />
<header class="navbar">
    <div class="container">
      <a href="index.html" class="logo-area">
        <img src="images/logo-concha.png" alt="Logo Concha" class="logo" />
      </a>

      <nav class="nav-links">
        <a href="filmes.html">Filmes</a>
        <a href="membros.html">Membros</a>
        <a href="listas.html">Listas</a>
      </nav>

      <div class="nav-actions">
        <a href="login.html" id="btn-entrar">Entrar</a>
        <a href="cadastro.html" class="btn" id="btn-cadastrar">Cadastre-se</a>
        <a href="perfil.html" id="btn-perfil" style="display: none;">Perfil</a>
        <a href="#" id="btn-sair" style="display: none;">Sair</a>
        <a href="listagemcadastro.html" id="btn-listagemcadastro" style="display: none;">Usu√°rios</a>
      </div>
    </div>
  </header>

  <main>
    <section class="intro-banner">
      <h2>Seu Perfil</h2>
      <p>Veja ou edite suas informa√ß√µes de conta abaixo.</p>
    </section>

    <form id="profile-form" class="form-dark profile-card">
      <label for="name">Nome:</label><br />
      <input type="text" id="name" name="name" required /><br /><br />

      <label for="email">Email:</label><br />
      <input type="email" id="email" name="email" required /><br /><br />

      <button type="submit" class="btn">Salvar</button>
      <button type="button" id="logout-btn" class="btn" style="background:#28283a; color:#fff; margin-top:10px;">Sair da Conta</button>
    </form>
  </main>

  <footer>
  <p>&copy; Concha. Feito por estudantes em Recife, Pernambuco. Dados de filmes fornecidos por <a href="https://www.themoviedb.org/" target="_blank" rel="noopener noreferrer">TMDB</a></p>
</footer>

<button id="toggle-theme" title="Alternar tema">üåô</button>

  <script src="script.js"></script>

  <script>
    const session = JSON.parse(localStorage.getItem('sessionUser'));
    const nameInput = document.getElementById('name');
    const emailInput = document.getElementById('email');
  
    if (!session) {
      alert('Voc√™ precisa estar logado para acessar esta p√°gina.');
      window.location.href = 'login.html';
    } else {
      nameInput.value = session.name;
      emailInput.value = session.email;
    }
  
    document.getElementById('profile-form').addEventListener('submit', function (e) {
      e.preventDefault();
  
      const updatedUser = {
        name: nameInput.value,
        email: emailInput.value
      };
  
      // Atualiza a sess√£o atual
      localStorage.setItem('sessionUser', JSON.stringify(updatedUser));
  
      // Atualiza o cadastro na lista de usu√°rios
      let usuarios = JSON.parse(localStorage.getItem('usuarios')) || [];
  
      usuarios = usuarios.map(user =>
        user.email === session.email ? { ...user, name: updatedUser.name, email: updatedUser.email } : user
      );
  
      localStorage.setItem('usuarios', JSON.stringify(usuarios));
  
      alert('Informa√ß√µes atualizadas com sucesso!');
    });

    // Bot√£o de logout
    document.getElementById('logout-btn').addEventListener('click', function () {
      localStorage.removeItem('sessionUser');
      localStorage.removeItem('isLoggedIn');
      window.location.href = 'index.html';
    });
  </script>
</body>
</html>